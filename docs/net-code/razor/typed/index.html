<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PH2TVNW');</script>
    <!-- End Google Tag Manager -->
    <!-- azing recipe embed resizer -->
    <script src="https://cdn.azing.org/e/1/embed.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Typed Razor Components (v16) - DRAFT / WIP | 2sxc 16 / EAV 16 </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Typed Razor Components (v16) - DRAFT / WIP | 2sxc 16 / EAV 16 ">
    <meta name="generator" content="docfx ">
  
    <link rel="shortcut icon" href="../../../assets/favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
  
  <meta property="docfx:rel" content="../../../">
  <meta property="docfx:newtab" content="true">

    <!-- Enable lightboxes on all images using https://github.com/roel4ez/docfx-lightbox-plugin -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.13/featherlight.min.css" type="text/css" rel="stylesheet">

    <!-- overwrite the built in highlightJs with a newer version -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/default.min.css">

    <!-- fancybox -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../assets/logos/vcurrent/50.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>

                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../../basics/index.html" title="Basics">Basics</a>
                      </li>
                      <li>
                          <a href="../../../abyss/index.html" title="Abyss">Abyss</a>
                      </li>
                      <li>
                          <a href="../../../web-api/index.html" title="Web APIs">Web APIs</a>
                      </li>
                      <li class="active">
                          <a href="../../../net-code/index.html" title="C# &amp; Razor">C# &amp; Razor</a>
                      </li>
                      <li>
                          <a href="../../../api/dot-net/index.html" title=".net API">.net API</a>
                      </li>
                      <li>
                          <a href="../../../js-code/index.html" title="JS &amp; TS API">JS &amp; TS API</a>
                      </li>
                </ul>            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="NetCode.Razor.Typed.Index">
<h1 id="typed-razor-components-v16---draft--wip">Typed Razor Components (v16) - DRAFT / WIP</h1>

<p>Before v16 we focused on Razor code which extensively used <code>dynamic</code> objects.
This allowed a lot of neat, compact code such as <code>&lt;div&gt;@Content.Title&lt;/div&gt;</code>
but in advanced scenarios resulted in many runtime issues which were hard to debug.</p>
<p>Because of this, we're experimenting with a new <strong>Typed</strong> Razor which does not use <code>dynamic</code> objects,
but actually ensures that almost everything is <strong>strictly typed</strong>.
This forces the developer to be more explicit and helps avoid many hard to solve problems.</p>
<h2 id="clear-new-naming-conventions">Clear, new Naming Conventions</h2>
<ul>
<li>Anything beginning with <code>My...</code> <em>belongs</em> to the current code.
<ul>
<li>MyItem</li>
<li>MyItems</li>
<li>MyData ??</li>
<li>MyModel</li>
</ul>
</li>
<li>Objects or methods which are singular are/return a single item
<ul>
<li>Item</li>
<li>Header</li>
<li>MyData.Item(...)</li>
<li>MyModel.Item(...)</li>
<li>MyModel.Thing(...)</li>
<li>AsItem(...)</li>
<li>AsThing(...)</li>
</ul>
</li>
<li>Objects or methods which are plural are/return a list of items
<ul>
<li>Items</li>
<li>MyData.Items(...)</li>
<li>MyModel.Items(...)</li>
<li>MyModel.Things(...)</li>
<li>AsItems(...)</li>
<li>AsThings(...)</li>
</ul>
</li>
<li>Anything beginning with <code>As...</code> is a helper to convert something to something else
<ul>
<li>AsItem</li>
<li>AsItems</li>
<li>AsThing</li>
<li>AsThings</li>
</ul>
</li>
<li>Built-in objects which are stacks, are explicitly named as such
<ul>
<li>SettingsStack (previously <code>Settings</code>)</li>
<li>ResourcesStack (previously <code>Resources</code>)</li>
</ul>
</li>
</ul>
<h2 id="not-available-apis-any-more">Not-available APIs any more</h2>
<ul>
<li>Settings</li>
<li>Resources</li>
<li>Content</li>
<li>Header</li>
<li>Data</li>
<li>AsDynamic(...)</li>
<li>AsList(...)</li>
</ul>
<h3 id="naming-of-item-objects">Naming of Item-objects</h3>
<ul>
<li><p><code>ITypedItem</code>. It has</p>
<ul>
<li>properties such as <code>.Id</code>, <code>.Guid</code>, <code>.Title</code></li>
<li>methods such as <code>.String(fieldName)</code>, <code>.Bool(fieldName)</code> etc.</li>
</ul>
</li>
<li><p><code>Item</code> is an <code>ITypedItem</code> which wraps a content-object (IEntity)</p>
</li>
<li><p><code>Items</code> is a list of TypedItems (<code>IEnumerable&lt;ITypedItem&gt;</code>)</p>
</li>
<li><p><code>AsItem(...)</code> will take a IEntity, a DynamicEntity or a List of these and return one <code>ITypedItem</code></p>
</li>
<li><p><code>AsItems(...)</code> ...</p>
</li>
<li><p><code>TypedModel.Item(...)</code></p>
</li>
<li><p><code>TypedModel.Items(...)</code></p>
</li>
<li><p>?? <code>MyItem</code></p>
</li>
<li><p>?? <code>MyItems</code></p>
</li>
<li><p>?? <code>MyHeader</code></p>
</li>
<li><p><code>someItem.Children(fieldName)</code> + overload</p>
</li>
<li><p><code>someItem.Child(fieldName)</code> + overload</p>
</li>
<li><p><code>someItem.Parents(typeName)</code> + overload</p>
</li>
</ul>
<p>MyData ?</p>
<ul>
<li><p>MyData.Item(...)</p>
</li>
<li><p>MyData.Items(...)</p>
</li>
<li><p>.Item <del>.Child(...)</del></p>
</li>
<li><p>.Items <del>.Children(...)</del></p>
</li>
<li><p>.Ref(...) <del>.Parent(...)</del></p>
</li>
<li><p>.Refs(...) <del>.Parents(...)</del></p>
</li>
</ul>
<p>TODO:</p>
<ul>
<li>Merge(...?) / Stack / MergeItems / <strong>StackItems</strong> / StackRead / AsStack / AsItemStack / AsThingStack(...)</li>
</ul>
<h3 id="naming-of-typed-read-thing-object">Naming of Typed? Read? Thing? Object?</h3>
<ul>
<li>IThing</li>
<li>ITypedThing</li>
<li>AsThing(...)</li>
<li>AsThings(...)</li>
<li>StackThings(...)</li>
<li>MyModel.Thing(...)</li>
<li>MyModel.Things(...)</li>
<li>CreateInstance.Thing(...)</li>
<li>CreateInstance.Things(...)</li>
</ul>
<h3 id="settings--resources-todo">Settings / Resources TODO</h3>
<ul>
<li>Settings</li>
<li><del>AllSettings</del></li>
<li><del>AllResources</del></li>
<li><code>SettingsStack</code></li>
<li><code>ResourcesStack</code></li>
<li><del>StackedSettings</del></li>
<li><del>MergedSettings</del></li>
<li>Something.Settings - eg. <code>All.Settings</code></li>
</ul>
<h2 id="where-data-comes-from-in-typed-razor">Where Data Comes from in Typed Razor</h2>
<ul>
<li><code>Data.MyContent</code> - an <code>IEntity</code> containing the first (or demo) item which belongs to this block/module.<br>
<em>previously</em>: <code>Content</code><br>
<em>typical use</em>: <code>var album = AsItem(Data.MyContent);</code></li>
<li><code>Data.MyHeader</code> - an <code>IEntity</code> containing the Header settings (or demo) which belong to this block/module.<br>
<em>previously</em>: <code>Header</code><br>
<em>typical use</em>: <code>var album = AsItem(Data.MyHeader);</code></li>
<li><code>Data.MyData</code> - an <code>IEnumerable&lt;IEntity&gt;</code> containing all items (or none, or one demo-item) belonging to this block/module.
<em>previously</em>: <code>Content</code> or <code>Data</code> (this caused some confusion)<br>
<em>typical use</em>: <code>var list = AsItems(Data.MyContent);</code></li>
<li><code>Data</code>, <code>Data[&quot;Default&quot;]</code> or <code>Data[&quot;some-stream-name]</code> lists/streams containing all items given to the block/module.
<ul>
<li>if the view is configured to use a <strong>Query</strong> then the query will provide these streams</li>
<li>if the view is configured to not use a Query, but just use data added by the user, then this contains the same data as <code>Data.MyData</code></li>
</ul>
</li>
</ul>
<h3 id="improve-createinstance-to-be-typed">Improve CreateInstance to be typed??</h3>
<h2 id="new-apis-in-the-typed-razor">New APIs in the Typed Razor</h2>
<ol>
<li>AsItem</li>
<li>AsTyped</li>
<li>Merge</li>
<li>TypedModel
<ol>
<li>TypedModel.Get(...)</li>
<li>TypedModel.Get<t>(...)</t></li>
<li>TypedModel.String</li>
<li>TypedModel.Int</li>
<li>TypedModel....</li>
<li>TypedModel.Typed</li>
<li>TypedModel.TypedList ???</li>
<li>TypedModel.Item</li>
<li>TypedModel.Items</li>
<li>TypedModel.File</li>
<li>TypedModel.Files</li>
<li>TypedModel.Folder</li>
<li>TypedModel.Folders</li>
<li>TypedModel.Toolbar</li>
</ol>
</li>
</ol>
<h2 id="removed--changed-common-apis">Removed / Changed Common APIs</h2>
<p>The following APIs worked in previous versions of Razor Templates but were removed / changed.</p>
<p>The exact list is still WIP!! TODO:</p>
<table>
<thead>
<tr>
<th>API of Previous Razors</th>
<th>Old Behavior</th>
<th>New Behavior</th>
<th>Replacement</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content</td>
<td><code>dynamic</code> object pointing to the first / main item</td>
<td>Disabled, should throw error if used TODO:</td>
<td>Data.MyContent (an IEntity)</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Settings</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Resources</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>App.Settings</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>App.Resources</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li><code>someDynamicEntity.EntityId</code> -&gt; <code>someDynamicEntity.Id</code></li>
<li><code>someDynamicEntity.EntityGuid</code> -&gt; <code>someDynamicEntity.Guid</code></li>
<li><code>someDynamicEntity.EntityTitle</code> -&gt; <code>someDynamicEntity.Title</code></li>
</ul>
<p>Here's an example:</p>
<pre><code class="lang-razor">@inherits Custom.Hybrid.Razor12
&lt;ul&gt;
  @foreach(var person in AsList(App.Data[&quot;Persons&quot;])) {
    &lt;li&gt;@person.Name&lt;/li&gt;
  }
&lt;/ul&gt;
</code></pre>
<p>Razor Components/Templates are the most powerful templates in 2sxc since you can program anything you want using C#.
They use the Asp.Net Razor engine and contain normal HTML intermixed with Razor placeholders like <code>@Content.FirstName</code> or longer code blocks usually marked with <code>@{ ...}</code>.</p>
<p>The template files usually reside inside App root folder or sub folder. These always begin with an <code>_</code> and end with <code>.cshtml</code>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>The <a class="xref" href="../../../basics/app/views/index.html">View Configuration</a> determines which razor file is being loaded.</p>
<p>If you are using <a class="xref" href="../../../basics/polymorphism/index.html">Polymorphism</a> then you may have multiple razor files with the same name in various folders, and Polymorph will decide which one will be shown.</p>
</div>
<h2 id="get-started-with-razor-templates">Get Started with Razor Templates</h2>
<div style="background: #0088F444; overflow: auto">
  <img src="../../../shared/tutorials/assets/razor.png" width="200px" style="padding-right: 20px; float: left">
  <h2> Discover More in the Razor Tutorials </h2>
<p>We have an rich series of <a class="xref" href="https://2sxc.org/dnn-tutorials/en/razor">Razor tutorials</a>. You should really check them out 👍.</p>
</div>

<ol>
<li>Install some Apps from the <a class="xref" href="https://2sxc.org/en/apps">App Catalog</a> - almost all apps use Razor</li>
<li>Learn the APIs using
<ol>
<li>The <a class="xref" href="https://2sxc.org/dnn-tutorials/en/razor">Razor Tutorials</a></li>
<li>using these docs</li>
<li>The technical <a class="xref" href="../../../api/dot-net/ToSic.Sxc.Dnn.RazorComponent.html">RazorComponent API</a></li>
</ol>
</li>
<li>We also suggest you look into the <strong>RazorBlade</strong> library which has a lot of neat helpers</li>
</ol>
<h2 id="read-also">Read also</h2>
<ul>
<li><a class="xref" href="../../../basics/app/views/index.html">Views</a></li>
<li><a class="xref" href="../../../basics/app/templates.html">Templates</a></li>
<li><a class="xref" href="../../../basics/server/render/tokens/index.html">Token Templates</a></li>
<li><a href="https://2sxc.org/dnn-tutorials/en/razor">Razor Tutorial</a></li>
</ul>
<h2 id="tips">Tips</h2>
<div class="TIP">
<h5>Tip</h5>
<p>To use the latest features of 2sxc 12+, make sure your razor file begins with the line<br>
<code>@inherits Custom.Hybrid.Razor12</code><br>
Otherwise your Razor templates is based on the default, older component code.</p>
</div>
<h2 id="history">History</h2>
<ol>
<li>Introduced in 2sxc 1.0</li>
</ol>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/2sic/2sxc-docs/blob/master/2sxc Docs Generator/pages/net-code/razor/typed/index.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      
      <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>

    <!-- override the built-in highlightjs with a newer version -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="../../../styles/cshtml-razor.js"></script>
    <script>
        hljs.registerLanguage('cshtml-razor', window.hljsDefineCshtmlRazor);
        hljs.highlightAll();
    </script>

    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.13/featherlight.min.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" src="../../../styles/2sxc-scripts.js"></script>

    <!-- fancybox -->
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
  </body>
</html>
