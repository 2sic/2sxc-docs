<!DOCTYPE html>
<html>
  <!-- 2sxc docs -->
  <head>
    <meta charset="utf-8">
      <title>Custom C# Web API - JSON Format | 2sxc 17 for Dnn and Oqtane </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Custom C# Web API - JSON Format | 2sxc 17 for Dnn and Oqtane ">
      
      <link rel="icon" href="../../assets/favicon.ico">
      <link rel="stylesheet" href="../../public/docfx.min.css">
      <link rel="stylesheet" href="../../public/main.css">
      <meta name="docfx:navrel" content="../../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/2sic/2sxc-docs/blob/master/2sxc Docs Generator/pages/net-code/web-api/json-format.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css">
      
      
  </head>

  <script type="module" src="./../../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>

  <script async="" src="https://www.googletagmanager.com/gtag/js?id=GTM-PH2TVNW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'GTM-PH2TVNW');
  </script>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../index.html">
            <img id="logo" class="svg" src="../../assets/logos/vcurrent/50.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">



              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">

                <a class="btn btn-sm border-0 text-nowrap version-button" xstyle="padding: 10px 0 0 0; width: 25px" href="https://go.2sxc.org/docs-versions" target="_blank">
                  &nbsp; v17 <i class="bi bi-caret-down-fill fs-6"></i>
                </a>
              </form>


            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="NetCode.WebApi.JsonFormat">
<h1 id="custom-c-web-api---json-format" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="5">Custom C# Web API - JSON Format</h1>

<h2 id="background-json-format-in-webapi-requests" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="7">Background: JSON Format in WebApi Requests</h2>
<p sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="9">Today most JavaScript clients use JSON to communicate with the server.
This is a very simple format, which is easy to read and write.
It's also very easy to parse in JavaScript, which is why it's so popular.</p>
<p sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="13">In the old days, Microsoft used XML for this, but it's much more complex and difficult to read and write.
When 2sxc was created, JSON was already the standard, so we never used XML.
But at that time, the json plugin <strong sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="15">Newtonsoft</strong> was the de-facto standard, so we used that.
But nowadays <code sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="16">System.Text.Json</code> is the de-facto standard.
This means that <em sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="17">by default</em> this is what is being used:</p>
<ol sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="19">
<li sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="19">On DNN on all base classes up until <code sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="19">Custom.Hybrid.Api14</code> Newtonsoft is used for serialization</li>
<li sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="20">On Oqtane all base classes use the new .net core serializer</li>
</ol>
<h2 id="how-to-go-modern" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="22">How to Go Modern</h2>
<p sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="24">In 2sxc 16 we introduced a new attribute called <code sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="24">[JsonFormatter]</code> - see <a class="xref" href="../../api/dot-net/ToSic.Sxc.WebApi.JsonFormatterAttribute.html" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="24">JsonFormatterAttribute</a>.
When it's applied to:</p>
<ol sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="27">
<li sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="27">a WebApi Controller class</li>
<li sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="28">a specific method of that class</li>
</ol>
<p sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="30">then it will use the new .net core serializer.
It has the following effects:</p>
<ol sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="33">
<li sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="33">It can auto-convert <code sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="33">IEntity</code> objects as well as lists/arrays of <code sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="33">IEntity</code> objects</li>
<li sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="34">By default it will use <strong sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="34">camelCase</strong> for all properties, which is the modern standard.</li>
</ol>
<div class="TIP" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="36">
<h5>Tip</h5>
<p sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="37">Remember that this applies to both <code sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="37">POST</code> data from the client,
as well as response data.</p>
</div>
<h2 id="example" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="40">Example</h2>
<pre><code class="lang-c#" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="42">using ToSic.Sxc.WebApi;   // For the [JsonFormatter] (see below)

[AllowAnonymous]
[JsonFormatter]
public class Api14AttController : Custom.Hybrid.Api14
{
    [HttpGet]
    public object GetEntity()
    {
        return (App.Data.List.First());
    }

    [HttpGet]
    public object GetEntities()
    {
        return App.Data.List;
    }
}
</code></pre>
<h2 id="effects-on-the-post-data" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="63">Effects on the POST Data</h2>
<div class="TIP" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="65">
<h5>Tip</h5>
<p sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="66"><code sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="66">POST</code> data is parsed case-insensitive, so it doesn't matter if the client sends <code sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="66">camelCase</code> or <code sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="66">PascalCase</code> - it will be parsed correctly.</p>
</div>
<p sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="68">There are 2 important effects to keep in mind:</p>
<ol sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="70">
<li sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="70">Most JSON in the POST will be the same no matter which serializer is used</li>
<li sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="71">Only exotic data such as binary files will be different</li>
</ol>
<h2 id="effects-on-response-data" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="73">Effects on Response Data</h2>
<div class="TIP" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="75">
<h5>Tip</h5>
<p sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="76">Response data is usually read by JavaScript, which is case sensitive.</p>
</div>
<p sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="78">The main impact on Response Data is the client should expect <code sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="78">camelCase</code> instead of <code sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="78">PascalCase</code>.
This can be configured if you want it differently, like this:</p>
<pre><code class="lang-c#" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="81">  [HttpGet]
  [JsonFormatter(Casing = Casing.Preserve)] // auto-convert but preserve casing
  public dynamic PersonsAutoPreserveCasing()
  {
    return App.Data[&quot;Persons&quot;];
  }
</code></pre>
<p sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="90">It will also auto-convert Entities for you, which used to be very difficult.
See <a class="xref" href="auto-convert-entities.html" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="91">Custom C# Web API - Auto Convert Entities</a></p>
<h2 id="recommended-reading" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="94">Recommended Reading</h2>
<ul sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="96">
<li sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="96"><a class="xref" href="https://2sxc.org/dnn-tutorials/en/razor/webapi/home" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="96">Web API Tutorials</a></li>
<li sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="97"><a class="xref" href="../../api/dot-net/ToSic.Sxc.WebApi.JsonFormatterAttribute.html" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="97">JsonFormatterAttribute</a></li>
</ul>
<hr sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="99">
<h2 id="history" sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="101">History</h2>
<ol sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="103">
<li sourcefile="pages/net-code/web-api/json-format.md" sourcestartlinenumber="103">New JsonFormatter introduced in 2sxc 16.00</li>
</ol>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/2sic/2sxc-docs/blob/master/2sxc Docs Generator/pages/net-code/web-api/json-format.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          
          <span>
            Made by <a href="https://www.2sic.com">2sic</a>
            with 💖 and
            <a href="https://dotnet.github.io/docfx">docfx</a>
            — 
            for <a href="https://2sxc.org">2sxc</a>,
            <a href="https://dnncommunity.org/">Dnn</a> 
            and <a href="https://www.oqtane.org/">Oqtane</a>
            — 
            see also <a href="">2sxc Github</a> and <a href="https://blazor-cms.org">Blazor CMS</a>
          </span>
        </div>
      </div>
    </footer>
  </body>
</html>