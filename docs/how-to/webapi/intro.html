<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PH2TVNW');</script>
    <!-- End Google Tag Manager -->
    <!-- azing recipe embed resizer -->
    <script src="https://cdn.azing.org/e/1/embed.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Introduction to WebAPI and REST APIs | 2sxc and EAV 10 </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Introduction to WebAPI and REST APIs | 2sxc and EAV 10 ">
    <meta name="generator" content="docfx 2.48.0.0">
    
    <link rel="shortcut icon" href="../../images/logos/favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    <meta property="docfx:newtab" content="true">
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/logos/2sxc-10-50.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../../specs/index.html" title="Specs">Specs</a>
                      </li>
                      <li>
                          <a href="../../how-to/index.html" title="How To">How To</a>
                      </li>
                      <li>
                          <a href="../../api/dot-net/index.html" title=".net API">.net API</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="HowTo.WebApi.Intro">
<h1 id="introduction-to-webapi-and-rest-apis">Introduction to WebAPI and REST APIs</h1>

<p>To use 2sxc/EAV data in JavaScript, from Mobile Apps or from other websites you need <strong>endpoints</strong> which will provide the data. 2sxc and EAV have everything prepared to make this easy for you and to ensure security - especially to ensure you only publish data you intend to publish.</p>
<p>A few terms to clarify before we begin:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> means that there is a url convention to access data like <code>.../blogposts/25</code></li>
<li><a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> also specifies that an <em>HTTP GET</em> is for reading, <em>HTTP POST</em> is for writing, etc.</li>
<li>All the APIs use <a href="https://en.wikipedia.org/wiki/JSON">JSON</a> for sending/receiving data. <a href="https://azing.org/2sxc/r/2zBGrCAd">This is the default schema</a>.</li>
</ul>
<h2 id="standard-entity-rest-endpoints">Standard Entity REST Endpoints</h2>
<p>These endpoints already exist and allow normal CRUD (Create, Read, Update, Delete) operations. To use them, you would need to enable the permissions and then you can access them using the REST URLs.</p>
<p>TODO REST URLs</p>
<h2 id="standard-query-rest-endpoints">Standard Query REST Endpoints</h2>
<p>Every Visual Query you create has a REST URL. If you set the permissions, you can then read from the Query through REST. You can also pass query-parameters in the URL.</p>
<h2 id="custom-c-webapi">Custom C# WebAPI</h2>
<p>You can easily create custom C# WebAPIs, and then access them through the URL. What these endpoints do is completely up to you.</p>
<ol>
<li>Standard <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> endpoints to allow Read/Create/Update/Delete of entities</li>
<li>Standard <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> endpoints to read data from a Visual Query</li>
<li>Custom WebAPI endpoints to read/write data as you wish</li>
</ol>
<p>Once you have opened the security on a standard endpoint or once you have created your custom endpoint, you can then access it from JavaScript, Mobile Apps or external systems. So your 1-2-3 steps for using data endpoints are:</p>
<ol>
<li>Decide which endpoint you need</li>
<li>Create / Publish the endpoint<ol>
<li>For standard endpoints, set the permissions as you need them</li>
<li>For custom endpoints, write the C# code</li>
</ol>
</li>
<li>Write the code to read the data (typically in JavaScript)</li>
</ol>
<h2 id="decide-which-endpoint-you-need">Decide which Endpoint you need</h2>
<iframe src="https://azing.org/2sxc/r/zhLnCg3e?embed=1" width="100%" height="400" frameborder="0" allowfullscreen="" style="box-shadow: 0 1px 3px rgba(60,64,67,.3), 0 4px 8px 3px rgba(60,64,67,.15)"></iframe>

<h2 id="for-standard-endpoints-set-security">For Standard Endpoints: Set Security</h2>
<iframe src="https://azing.org/2sxc/r/34pAzAF2?embed=1" width="100%" height="400" frameborder="0" allowfullscreen="" style="box-shadow: 0 1px 3px rgba(60,64,67,.3), 0 4px 8px 3px rgba(60,64,67,.15)"></iframe>

<h2 id="for-custom-webapi-write-the-code">For Custom WebAPI: Write the Code</h2>
<p>TODO</p>
<h2 id="write-the-endpoint-client---usually-in-javascript">Write the Endpoint-Client - usually in JavaScript</h2>
<p>TODO</p>
<p>The WebApi is a set of http APIs which let you access content-items, lists of items, queries or even custom c# APIs. You can find some jQuery examples on the <a class="xref" href="../../specs/js/2sxc.html">$2sxc-WebApi page</a>.</p>
<p>For example, assume you have the <a class="xref" href="https://2sxc.org/en/apps/app/dnn-blog-app-for-dnn-dotnetnuke">blog-app</a> installed and your JS would request a JSON from this endpoint (logged in as host, so security is not an issue):</p>
<p><code>[root-path]/app/auto/content/BlogPost</code></p>
<p>...then your JS would receive a JSON with all BlogPost items. More examples:</p>
<ol>
<li>Reading this: <code>[root-path]/app/auto/content/BlogPost/1050</code><br>...would give you exactly one BlogPost item (with the id 1050).</li>
<li>Doing an http POST to this <code>[root-path]/app/auto/content/BlogPost/1050</code><br>... with a POST body of <code>{ &quot;Title&quot;: &quot;changed title&quot;}</code><br>...would let you update the item 1050.</li>
<li>This kind of a call <code>[root-path]/app/auto/query/BlogPostsByAuthor?Author=Daniel%20Mettler</code><br>...would run the pre-defined query and return the Blog Posts of this author</li>
</ol>
<h2 id="understanding-urls-for-in-context-vs-external-use">Understanding URLs for In-Context vs. External Use</h2>
<p>In most cases your JS will be part of your App, so it will be running inside a 2sxc-template. In this case, you can rely on auto-detection of the app, like</p>
<p><code>.../app/auto/content/...</code></p>
<p>There are also cases where you want to access the app REST or WebApi from outside of the app itself. This can be from the skin (for example, to highlight all words to which your glossary-app has definitions), from another app, or from another website. In this case, auto-app detection won&#39;t work, so you&#39;ll have to specify the app-name (folder-name) in the request-path, like this:</p>
<p><code>.../app/Glossary/content/...</code></p>
<p>This applies to all endpoints like <code>content</code>, <code>query</code>, <code>api</code>.</p>
<h2 id="available-endpoints-in-2sxc-810">Available Endpoints in 2sxc 8.10+</h2>
<h3 id="query">Query</h3>
<p>The Query endpoint can be accessed on</p>
<ul>
<li><code>.../app/auto/query/[your-query-name]</code> when you&#39;re accessing a query of the current App (from a dnn-page with this module), as then 2sxc uses auto-detect</li>
<li><code>.../app/[app-folder]/query/[your-query-name]</code> using this endpoint from external (other module, other page, other website) as then auto-detect can&#39;t work.</li>
</ul>
<p>Note that Query endpoints only support the http-verb GET.</p>
<h3 id="c-webapi-endpoints">C# WebAPI Endpoints</h3>
<p><a class="xref" href="dotnet-webapi.html">C# / .net WebApis</a> are custom WebAPIs of an app. You can find a good example on the <a href="https://2sxc.org/en/apps/app/mobius-forms">Mobius Forms App</a>. Calling these is as follows:</p>
<ul>
<li><code>.../app/auto/api/[YourName]</code> when accessing a WebApi of the current app (from a dnn-page with this module), as then 2sxc uses auto-detect</li>
<li><code>.../app/[app-folder]/api/[YourName]</code> when using this endpoint from external, as auto-detect can&#39;t work then.</li>
</ul>
<h4 id="new-in-935-polymorphism--multi-edition-controllers">New in 9.35: Polymorphism / Multi-Edition Controllers</h4>
<p>In 2sxc 9.35 we&#39;re introducing an experimental feature to publish the <strong>same</strong> api controller in multiple editions, to enable open-heart-surgery. It&#39;s called <a class="xref" href="../../specs/cms/polymorph.html">Polymorph</a>, and if you use it to place controllers in a <code>subfolder/api</code> you&#39;ll access it as follows:</p>
<ul>
<li><code>.../app/auto/[edition]/api/[YourName]</code> when accessing from a 2sxc-module directly with auto-detect</li>
<li><code>.../app/[app-folder]/[edition]/api/[YourName]</code> when auto-detect can&#39;t work (external access).</li>
</ul>
<p>Read more about <a class="xref" href="../../specs/cms/polymorph.html">Polymorph</a> and <a class="xref" href="dotnet-webapi.html">C# WebApi</a>.</p>
<h4 id="webapi-security--permissions">WebAPI Security / Permissions</h4>
<p>Your C# code determines what security is applied, and what http verbs are supported.</p>
<h3 id="content-items-services">Content Items Services</h3>
<p>The content-items services support all common REST verbs</p>
<ul>
<li><code>.../app/auto/content/[YourContentType]</code> - GET (retrieve list)</li>
<li><code>.../app/auto/content/[your-content-type]/[item-id]</code> - GET (get one), POST (create/update), DELETE (delete)</li>
<li><code>.../app/auto/content/[your-content-type]/[item-guid]</code> - GET (get one), POST (create/update), DELETE (delete)</li>
</ul>
<p>Note that when using this endpoint from external, you&#39;ll have to replace <code>auto</code> with the app name as it is used in the folder of the app (not the nice, translatable/visible app-name).</p>
<h4 id="content-security--permissions">Content Security / Permissions</h4>
<p>Security / Permissions are configured at the content-type level, in the App-Management UI.</p>
<h2 id="how-it-works">How it works</h2>
<p>todo</p>
<h2 id="notes-and-clarifications">Notes and Clarifications</h2>
<ol>
<li>Basically every call to these paths will simply return what you expect, or perform what you want</li>
<li>Note that for most actions some security rules will apply, for example:<ol>
<li>reading data requires read-permissions on that content-type</li>
<li>writing data requires write-permissions or a content-type or on a specific item (owner-permissions)</li>
<li>querying a query requires read-permissions on that query</li>
<li>querying a web-api requires the web-api to have its own permission check</li>
</ol>
</li>
<li>In DNN 9, the root-path for api changed!<ol>
<li>DNN 7 &amp; 8: <code>[portal-root with language]/desktopmodules/2sxc/api/...</code></li>
<li>DNN 9: <code>[portal-root with language]/api/2sxc/...</code></li>
<li>This is handled automatically if you are using $2sxc or 2sxc4ng - but you need to be aware of this if you&#39;re using your own JS or accessing from external</li>
</ol>
</li>
</ol>
<h2 id="read-also">Read also</h2>
<ul>
<li><a class="xref" href="dotnet-webapi.html">DotNet WebApi</a></li>
<li><a class="xref" href="../../specs/cms/polymorph.html">Concepts: Polymorphisms</a></li>
</ul>
<h2 id="demo-app-and-further-links">Demo App and further links</h2>
<p>You should find some code examples in this demo App</p>
<ul>
<li><a href="http://2sxc.org/en/apps/app/tutorial-javascript-rest-api-using-jquery-and-angularjs">REST and WebApi Tutorial</a></li>
</ul>
<h2 id="history">History</h2>
<ol>
<li>Introduced in 2sxc ca. 5.x</li>
<li>Enhanced with Polymorph Editions in 2sxc 9.35 (allowing subfolder/api)</li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/2sic/2sxc/blob/develop/ToSIC_SexyContent/Docs-Generator/how-to/webapi/intro.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
